---
title: "Learning AnVIL"
author: "AnVIL"
description: "An overview of the AnVIL platform documentation and getting
started content."
---

# Learning AnVIL

  <!--- Add links! --->

The AnVIL platform enables researchers to analyze high-value genomic datasets with popular analysis tools in a secure cloud computing environment.

AnVIL is an [NHGRI](https://www.genome.gov/Funded-Programs-Projects/Computational-Genomics-and-Data-Science-Program/Genomic-Analysis-Visualization-Informatics-Lab-space-AnVIL) supported data commons running on the Google Cloud Platform (GCP).

AnVIL uses [Terra](/learn/videos/terra-videos) as its analysis platform, [Gen3](/learn/getting-started/getting-started-with-gen3) for data search and artificial cohort creation, and [Dockstore](/learn/videos/dockstore-videos) as a repository for Docker-based genomic analysis tools and workflows.

In addition to Docker-based analysis tools,  AnVIL supports popular interactive analysis tools such as Jupyter notebooks, Bioconductor, RStudio, and [Galaxy](/learn/getting-started/getting-started-with-galaxy).

By operating in the cloud, AnVIL users can scale analyses from a single computer to thousands of cores and securely share data, workflows, and reproducible results with collaborators and colleagues.


  <!--- Add FAIR, add interoperability with other data commons, increased accessibility to complex data center--->

## Getting Started


All analysis in Terra is performed in Terra workspaces. AnVIL’s Terra entry point is https://anvil.terra.bio.

### Introduction to Terra Workspaces

Terra workspaces typically hold genomic data, subject level phenotypic data, and are configured with analysis tools such as notebooks and Docker images. Workspaces also hold the output or derived data generated by analyses.
Workspace configuration also controls who can view, clone,  launch, or share a workspace and what Google Billing Account  is charged for any GCP cloud compute costs incurred by workspace.

Once configured, workspaces can be launched to run batch or interactive analysis on GCP at scale.

For a list of open access, fully configured example workspaces demonstrating how to perform a number of genomic analyses see [Using Example Workspaces                        ](/learn/getting-started/using-example-workspaces)


### Account Setup

Anyone with a Google account can register with Terra and view Terra’s publicly accessible workspaces, [1000 Genomes High-Coverage](https://anvil.terra.bio/#workspaces/anvil-datastorage/1000G-high-coverage-2019), for example.

Likewise, anyone with a Google account can register with Gen3 and view publicly accessible datasets or register with Dockstore and browse tools and workflows.

To access controlled access datasets in Gen3 or Terra, you will link your eRA Commons ID to both platforms and link your Gen3 and Terra accounts.

For instructions on setting up accounts in Google, Terra, Gen3 and lniking them together see  [Account Setup](/learn/account-setup).

### Billing

AnVIL and all of its components are free to use. Certain activities, however, such as creating or cloning a workspace,  downloading data, or running an analysis, will incur costs on behalf of the workspace owner for any CGP compute, storage, or egress utilized

#### Using a Collaborator’s Billing Account

Once your Terra account is setup and linked to your eRA commons ID, collaborators will be able to share workspaces with you. You will be able to run an analys on any workspace that you have “Write, Can Execute” permissions on.


  <!--- Add info about cloud credits--->

#### Setting Up Your Own Billing Account



#### Setting Up Billing Accounts for your Lab

### Setting Up Budgets and Alerts



Terra passes along GCP charges with no markup through the Terra Billing Project associated with the workspace.

To run an analysis on Terra y

Create a GCP Billing Account
Must specify a payment method.

Add Terra as a User - can create projects

Create a Terra Billing Project, this creates a google billing project for the Billing Account.

Once you have a Terra Billing Project you can use it to create workspaces that you can use or share. Give it to someone with write and cant share.

You can search for workspaces per billing project, so you can see them again later.




The Terra Billing Project is in turn associated with a Google Billing Account associated with the workspace owner.

To launch an existing workspace you must either be the workspace “Owner” or be a workspace “Writer” with “Can Execute” permissions.


To create or clone a workspace you must be associated with a Terra Billing Project.

To obtain access to a Terra Billing Project you will need to either set one up yourself or be added to one by your lab manager or principal investigator.

https://support.terra.bio/hc/en-us/articles/360025851892-Reader-writer-or-owner-Workspace-access-controls-explained
### Discovering and Accessing Data


A full listing of AnVIL’s datasets searchable by disease, data type, and consent type on our [Dataset Catalog](/data).

Cohorts created in Gen3 can be exported to Terra workspaces for analysis. Additionally, Terra data-centric workspaces can be cloned in Terra and then used in an analysis.

See [Requesting Data Access](/learn/accessing-data/requesting-data-access) and [Discovering Data](learn/accessing-data/discovering-data) for more information.


  <!--- 

### Running an Analysis
 TODO gudes for running different kinds of analysis.. --->

### Sharing Workspaces

Share with  but consider if you want to allow can compute. Consider if you want to allow can share.


### More info


### Getting Help





















# Learning AnVIL

[Docs Page](https://docs.google.com/document/d/1B9nEQWm0yww51csuB7leZKLpmeNUbVoJrWlAp5NbmiY/edit)

The AnVIL platform allows researchers to analyze high-value genomic datasets with popular genomics analysis tools in a secure cloud computing environment.

AnVIL is composed of many components and tools each with its own use cases documentation.

The AnVIL training materials curate and highlight existing component and tool documentation and provide original content about how to use the AnVIL platform’s components and tools together to accomplish the goals of AnVIL’s different user personas.


AnVIL is in the process of persona-specific background material, guides, tutorials, and reference material for Data Analysts, Principal Investigators, Developers, Instructors, and Data Contributors.



## AnVIL Quickstart Guides

To facilitate onboarding to the platform, the “Quick Start Guides” below have
been developed for several of AnVIL's user personas with more coming soon.

### For Principal Investigators

- [Set Up Lab Accounts](/learn/for-pis/setting-up-lab-accounts) - Follow these instructions to get your accounts, set up billing, and set up your team members to do research with AnVIL.

- [Budget Templates](https://docs.google.com/document/d/1HX4-3F-bLCwld_qsxOPd1OSHV403C0cYgVnT8tnpPJc) - Templates for calculating a budget and writing a budget justification for using AnVIL in your grant applications.


### For Consortia

- [Submitting Consortium Data](/learn/consortia/data-submission) - An overview of the process and guidelines for submiting consortia data.

## Overview of Terra

Terra is AnVIL's analysis platform and allows users to access data, run analysis tools and collaborate.

- [Overview of Terra for new users](https://support.terra.bio/hc/en-us/sections/360006866192-New-users-overview) - An overview of the Terra platform covering account and billing setup, accessing and managing data, pipelining analysis, and interactive analysis.

- [Terra training materials](https://support.terra.bio/) - A library of training materials for the Terra platform.

- [Navigating the Terra user interface](https://support.terra.bio/hc/en-us/articles/360022704371-Navigating-in-Terra) - An overview of the Terra user interface covering how to manage your profile, set up billing, manage groups, access, clone, and share workspaces, access tools, data, and curated workspaces.

- [Data privacy and access](https://support.terra.bio/hc/en-us/articles/360026775691-Managing-data-privacy-and-access-with-Authorization-Domains) - Because research is frequently collaborative, you need to be able to keep sensitive genomic data secure, but still easy to share. Terra was designed to help you balance these competing requirement

### Running Analyses on Terra

- [Running GATK workflows](https://support.terra.bio/hc/en-us/articles/360029034232-Getting-started-with-GATK-workflows-in-the-cloud-FAQs) - If you're new to running GATK on a cloud-based platform, or new to Terra, this information will help get you started. From pre-processing raw sequencing data through variant calling and joint calling, showcase workspaces provide fully reproducible workflows for critical use-cases and include extensive documentation and sample data to practice on.

- [Interactive analysis with Jupyter notebooks](https://support.terra.bio/hc/en-us/articles/360024898671-Interactive-analysis-with-Jupyter-notebooks) - Jupyter notebooks are an open-source analysis environment where you can visualize and analyze data in real-time to gain insight into study data. Import data including processed genomics, phenotype, and transcriptomics data stored in the cloud and analyze with custom or pre-built libraries using R or Python.

- [Visualizing genomic data with IGV](https://support.terra.bio/hc/en-us/articles/360029654831-Viewing-IGV-tracks-of-BAM-files-in-your-workspace-data) -This article explains three ways you can use the [Integrative Genomics Viewer](https://software.broadinstitute.org/software/igv/) (IGV) to examine tracks from BAM (.bam) files in Terra.


## Platform Component Guides

Each of the key tools and components of AnVIL is developing a dedicated
getting started guide. The currently available guides are listed below:

- [Getting Started with Gen3](/learn/getting-started/getting-started-with-gen3).

- [Getting Started with Galaxy](/learn/getting-started/getting-started-with-galaxy).






Share vs Clone

Cloning makes anew copy that gets a new Terra Billing Project.

Readers can share to other readers and decide if the new reader can share or not. Readers can ever update or execute the workspace. They can only view it.


When you share with a writer they can always read, but you can control if they can execute or control

Workspace Roles


Share Role
Can Read
Can Modify
Can Compute
Can Share
Reader
Yes
No
No
Optional
Writer
Yes
Yes
Optional
Optional
Owner
Yes
Yes
Yes
Yes



Google Billing Account Roles



Can you add administrator or user to an individual Google Billing Account?


https://cloud.google.com/billing/docs/how-to/manage-billing-account
The workspace does not pay for clouds.
It can take a few minutes to create a billing project


Questions

What roles are there for Terra Billing Project? I only saw “Owner” and “not specified.. E.g. normal”  with owner meaning can manage users.

If someone is a Billing Project Owner and they create a workspace then, even if you remove them from ownership of the project they can still run the workspace and spend your money.

How can you list other people’s workspaces?

You can’t, so the guide says create the workspace for them then you are the owner and can always see it.

Give them writer, no share access and remove writer access when they leave.


Terra Groups are also auth domains.


Are there any feature switches in anvil.terra.bio that are not in terra.bio?
 
